{% from "table/macro.njk" import govukTable %}

{% extends "layout.html" %}

{% block pageTitle %}
Energy certificates for SW1P 3BU<!-- {{ data['postcode-or-reference'] | upper}} -->
{% endblock %}


{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-l">
      Energy certificates for SW1P 3BU<!-- {{ data['postcode-or-reference'] | upper}} -->
    </h1>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-third">
    <form action="" method="post" novalidate class="govuk-form-with-border">
      {% from "checkboxes/macro.njk" import govukCheckboxes %}

      {{ govukCheckboxes({
        idPrefix: "certificate-type",
        name: "certificate-type",
        classes: "govuk-checkboxes--small",
        fieldset: {
          legend: {
            text: "Certificate type",
            isPageHeading: false,
            classes: "govuk-fieldset__legend--s"
          }
        },
        items: [
          {
            value: "residential-epc",
            text: "Residential energy performance certificate (EPC)",
            checked: (data['certificate-type'] and 'residential-epc' in data['certificate-type'])
          },
          {
            value: "non-residential-epc",
            text: "Non-residential energy performance certificate (EPC3 or 4)",
            checked: (data['certificate-type'] and 'non-residential-epc' in data['certificate-type'])
          },
          {
            value: "dec",
            text: "Display energy certificate (DEC)",
            checked: (data['certificate-type'] and 'dec' in data['certificate-type'])
          },
          {
            value: "residential-epc",
            text: "Air conditioning inspection certificate (AC-CERT)",
            checked: (data['certificate-type'] and 'ac-cert' in data['certificate-type'])
          }
        ]
      }) }}

      {% from "button/macro.njk" import govukButton %}

      {{ govukButton({
        text: "Filter results"
      }) }}
    </form>
  </div>

  <div class="govuk-grid-column-two-thirds">
    {% if addresses.length %}
    <p class="govuk-body">There are {{ addresses.length }} results for <span class="govuk-!-font-weight-bold">all energy performance
        certificates</span></p>
    <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

    <table class="govuk-table">
      <caption class="govuk-table__caption"></caption>
      <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        {% if (selection===0) %}
        <th class="govuk-table__header" scope="col">Type</th>
        {% endif %}
        <th class="govuk-table__header" scope="col">Type</th>
        <th class="govuk-table__header" scope="col">Address</th>
        <th class="govuk-table__header" scope="col">Grade</th>
      </tr>
      </thead>

      <tbody class="govuk-table__body">

      {% for item in addresses %}
      <tr class="govuk-table__row">
        {% if (selection===0) %}
        <th class="govuk-table__header" scope="row"><abbr title="{{item.type}}">{{item.initials}} WTF</abbr></th>
        {% endif %}
        <td class="govuk-table__cell">{{ item.certificate_type }}</td>
        <td class="govuk-table__cell"><a href="/certificate/results/{{item.reference}}">{{item.address}}</a></td>
        <td class="govuk-table__cell">{{item.category}}</td>
      </tr>
      {% endfor %}

      </tbody>
    </table>

    {% else %}
    <h2 class="govuk-heading-m">No results</h2>
    <p class="govuk-body">You may want to check the postcode and <a href="/certificate">search again</a>.</p>
    <p class="govuk-body">You can use this service if you want to <a href="/assessor">find an Assessor</a>.</p>
    <p class="govuk-body">If you are looking for a property in Scotland you will need to use the <a class="govuk-link"
        href="https://www.scottishepcregister.org.uk">Scottish EPC register.</a></p>
    {% endif %}
  </div>
</div>

{% endblock %}
